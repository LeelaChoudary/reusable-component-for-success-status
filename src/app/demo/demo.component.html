<p>demo works!</p>
<form [formGroup]="dynamicForm" (ngSubmit)="onSubmit()">
    <!-- Render initial fields from the first API call -->
    <div *ngFor="let field of formConfig">
        <div [ngSwitch]="field.type">
            <div *ngSwitchCase="'text'">
                <label>{{ field.label }}</label>
                <input type="text" [formControlName]="field.name" [placeholder]="field.placeholder">
            </div>
            <div *ngSwitchCase="'email'">
                <label>{{ field.label }}</label>
                <input type="email" [formControlName]="field.name">
            </div>
            <div *ngSwitchCase="'select'">
                <label>{{ field.label }}</label>
                <select [formControlName]="field.name">
                    <option value="">Select...</option>
                    <option *ngFor="let option of field.options" [value]="option.key">{{ option.value }}</option>
                </select>
            </div>
        </div>
        <div *ngIf="dynamicForm.controls[field.name].invalid && dynamicForm.controls[field.name].touched"
            class="text-danger">
            {{ field.label }} is required.
        </div>
    </div>

    <!-- Render dynamic fields based on the businesslineid selection -->
    <div *ngIf="dynamicFields.length > 0">
        <h3>Dynamic Fields</h3>
        <div *ngFor="let field of dynamicFields">
            <div [ngSwitch]="field.type">
                <div *ngSwitchCase="'text'">
                    <label>{{ field.label }}</label>
                    <input type="text" [formControlName]="field.name">
                </div>
                <div *ngSwitchCase="'select'">
                    <label>{{ field.label }}</label>
                    <select [formControlName]="field.name">
                        <option value="">Select...</option>
                        <option *ngFor="let option of field.options" [value]="option.key">{{ option.value }}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <button type="submit" [disabled]="dynamicForm.invalid">Submit</button>
</form>